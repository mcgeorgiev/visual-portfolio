{% extends "base.html" %}
{% block content %}




    <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.4.1/croppie.min.css" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.4.1/croppie.min.js"></script>

    <div class="row">
        Profile picture upload
        <br>
        <a class="button">
          <span>Upload</span>
          <input type="file" id="profile-picture-upload" accept="image/*" required/>
        </a>
        <small class="error">Please choose or upload your profile picture</small>
        <h6 class="text-center">Profile Picture Preview</h6>

        <div class="text-center">
          <div id="profile-pic-preview" src="http://placehold.it/300.jpg?text=choose+or+upload+a+profile+picture"></div>
        </div>
    </div>

    <button id="select-crop-points">
      Hey
    </button>

    <script>

    var $profilePicPreview = $('#profile-pic-preview').croppie({
      viewport: {
        width: 200,
        height: 200,
        type: 'square'
      },
      boundary: {
        width: 300,
        height: 300
      },
      enableExif: true
    });

    function readFile(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (event) {
        $profilePicPreview.croppie('bind', {
          url: event.target.result
        });
      };

      reader.readAsDataURL(input.files[0]);
    } else {
      alert('Sorry - you\'re browser doesn\'t support the FileReader API');
    }
    }

    $('#profile-picture-upload').on('change', function() { readFile(this);
  });


    $("#select-crop-points").click(() => {
      console.log($profilePicPreview.croppie('get'));
    });

    </script>


{% endblock %}
