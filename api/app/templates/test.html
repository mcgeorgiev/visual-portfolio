{% extends "base.html" %}]
{% block content %}
  <style>
    /*body { font-family:Lucida Sans, Arial, Helvetica, Sans-Serif; font-size:13px; margin:20px;}
    #main { width:960px; margin: 0px auto; border:solid 1px #b2b3b5; -moz-border-radius:10px; padding:20px; background-color:#f6f6f6;}
    #header { text-align:center; border-bottom:solid 1px #b2b3b5; margin: 0 0 20px 0; }
    fieldset { border:none; width:320px;}
    legend { font-size:18px; margin:0px; padding:10px 0px; color:#b0232a; font-weight:bold;}
    label { display:block; margin:15px 0 5px;}
    input[type=text], input[type=password] { width:300px; padding:5px; border:solid 1px #000;}
    .prev, .next { background-color:#b0232a; padding:5px 10px; color:#fff; text-decoration:none;}
    .prev:hover, .next:hover { background-color:#000; text-decoration:none;}
    .prev { float:left;}
    .next { float:right;}*/
    #steps { list-style:none; width:100%; overflow:hidden; margin:0px; padding:0px;}
    #steps li {font-size:24px; float:left; padding:10px; color:#b0b1b3;}
    #steps li span {font-size:11px; display:block;}
    #steps li.current { color: red;}
    #box {
      width: 400px;
      height: 400px;
    }
  </style>
  <h3>TESTING JQUERY</h3>

  <form id ="TestForm" action="">
    <fieldset>
      <legend>Upload Image</legend>
      <input type="file" id="profile-picture-upload" accept="image/*" required/>
      <img class="chosen-image" src="#" alt="your image" />
      <!-- <img id="profile-pic-preview" src="http://placehold.it/300.jpg?text=choose+or+upload+a+profile+picture"> -->

    </fieldset>
    <fieldset>
      <legend>Crop Image</legend>
      <!-- <img class="chosen-image" src="#" alt="your image" /> -->
      <div id="box">
        <img id="profile-pic-preview" src="#">
      </div>
      <br>
      <br>
      <button type="button" id="crop-button">Crop</button>

    </fieldset>

    <fieldset>
      <legend>Add Data</legend>
      Data: <input type="text" name="data"><br>
      Submit: <input id="SaveAccount" type="button" value="Submit form" />
    </fieldset>
  </form>

  <!-- <div class="row">
      Profile picture upload
      <br>
      <a class="button">
        <span>Upload</span>
        <input type="file" id="profile-picture-upload" accept="image/*" required/>
      </a>
      <small class="error">Please choose or upload your profile picture</small>
      <h6 class="text-center">Profile Picture Preview</h6>

      <div class="text-center">
        <img id="profile-pic-preview" src="http://placehold.it/300.jpg?text=choose+or+upload+a+profile+picture"></div>
      </div>
  </div> -->




  <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.4.1/croppie.min.css" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.4.1/croppie.min.js"></script>



  <script>
  $(document).ready(function() {


  // alert(Croppie.defaults.toSource());
    var $profilePicPreview = $('#box').croppie({
      viewport: {
        width: 360,
        height: 360
      },
      showZoom: false,
    });

    function readFile(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (event) {
        $profilePicPreview.croppie('bind', {
          url: event.target.result,
          points: [0, 0, 500, 500]
        });
        $('.chosen-image').attr('src', event.target.result);
        $('.cr-image').css('opacity', 1);

      };

      reader.readAsDataURL(input.files[0]);
    } else {
      alert('Sorry - you\'re browser doesn\'t support the FileReader API');
    }
    }

    $('#profile-picture-upload').on('change', function() { readFile(this); });




    var steps = $("#TestForm fieldset");
    var count = steps.size();
    $("#SaveAccount").hide();
    $("#TestForm").before("<ul id='steps'></ul>");


    steps.each(function(i) {
      $(this).wrap("<div id='step" + i + "'><div>");
      $(this).append("<p id='step" + i + "commands'></p>");

      var name = $(this).find("legend").html();
      $("#steps").append("<li id='stepDesc" + i + "'>Step " + (i + 1) + "<span> " + name + "</span></li>");

      if (i == 0) {
        selectStep(i);
        createNextButton(i);
        // $('#imgInp').change(function(){
        //   readURL(this);
        // });
      } else if (i == (count - 1)) {
        $('#step' + i).hide();
        createPrevButton(i);
      } else {
        $('#step'+ i).hide();
        createPrevButton(i);
        createNextButton(i);
        // $('#image_url').on("DOMSubtreeModified", function(){
        //   crop();
        // });
      }


    });

    // function crop() {
    //   image_url = $("#image_url").attr("data-name");
    //
    // }



    function selectStep(i) {
      // Hacky way to ensure the higlighted parts are only on the current
      $("#stepDesc" + (i-1)).removeClass("current");
      $("#stepDesc" + (i+1)).removeClass("current");
      $("#stepDesc" + i).addClass("current");

    }

    function createPrevButton(i) {

      var stepName = "step" + i;

      $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Prev' class='prev'>< Back</a>");

      $("#" + stepName + "Prev").bind("click", function(e) {
          $("#" + stepName).hide();
          $("#step" + (i - 1)).show();
          $('#SaveAccount').hide();
          selectStep(i - 1);
      });
    }


    function createNextButton(i) {
      var stepName = "step" + i;
      $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Next' class='next'>Next ></a>");
      $("#" + stepName + "Next").bind("click", function(e) {
          $("#" + stepName).hide();
          $("#step" + (i + 1)).show();
          if (i + 2 == count)
            $('#SaveAccount').show();
          selectStep(i + 1);
      });
    }

    // function readURL(input) {
    //   if (input.files && input.files[0]) {
    //     var reader = new FileReader();
    //
    //     reader.onload = function(e) {
    //       //alert(e.target.result);
    //       $('.chosen-image').attr('src', e.target.result);
    //       $('#image_url').attr('data-name', e.target.result);
    //       basic.croppie('bind', {
    //         url: e.target.result
    //       });
    //     }
    //
    //     reader.readAsDataURL(input.files[0]);
    //
    //   }
    // }

    // $('.cr-slider').mousedown( function() {
    //
    //
    //
      var data = $(".cr-slider");
      console.log(data.attr("step"));
      data.attr("step", "1.5");
      console.log(data.attr("step"));
    //});



  });
  </script>

{% endblock %}
